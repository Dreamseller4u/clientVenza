{"ast":null,"code":"var _jsxFileName = \"/Users/macbookair/Documents/Webapps/react-crm/client/src/components/HomeComponents/BikesList/BookingModal/BookingModalForm.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { reduxForm } from 'redux-form';\nimport WizardFormFirstPage from './WizardFormFirstPage';\nimport WizardFormSecondPage from './WizardFormSecondPage';\nimport WizardFormThirdPage from './WizardFormThirdPage';\nimport format from 'date-format';\nimport { MDBContainer, MDBRow, MDBCol } from \"mdbreact\";\nimport { addNewBookinThunk } from '../../../../redux/bookingReducer';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport style from './style.module.css';\n\nconst ModalForm = props => {\n  let helmets = [{\n    value: 'none'\n  }, {\n    value: '1'\n  }, {\n    value: '2'\n  }, {\n    value: '3'\n  }];\n  const [startDate, setStartDate] = useState(props.info.dateInfo.startDate || new Date());\n  const [endDate, setEndDate] = useState(props.info.dateInfo.endDate || new Date().setDate(startDate.getDate() + 3));\n  const [pickUp, setPickUp] = useState(props.info.dateInfo.pickUp || 'Office');\n  const [dropOff, setDropOff] = useState(props.info.dateInfo.dropOff || 'Office');\n  const [name, setName] = useState('');\n  const [passport, setPassport] = useState('');\n  const [address, setAddress] = useState('');\n  const [phone, setPhone] = useState('');\n  const [totalDays, setTotalDays] = useState('');\n  const [pricePerDay, setPricePerDay] = useState(props.info.content.pricePerDay);\n  const [totalAmount, setTotalAmount] = useState('');\n  const [deposit, setDeposit] = useState(props.info.content.deposit);\n  useEffect(() => {\n    setTotalDays(Math.floor((endDate - startDate) / 1000 / 60 / 60 / 24));\n  }, [endDate, startDate]);\n  useEffect(() => {\n    const sum = totalDays * pricePerDay;\n    setTotalAmount(sum < props.info.content.pricePerMonth ? sum : props.info.content.pricePerMonth);\n  }, [totalDays, pricePerDay]);\n  useEffect(() => {\n    if (totalDays >= 15) {\n      setPricePerDay(props.info.content.pricePerDay - 50);\n    }\n\n    if (totalDays > 31) {\n      alert(\" If you want rent more then 1 mmonth pls contact us and we give you special price\");\n    }\n  }, [totalDays]);\n  const [page, setPage] = useState(1);\n\n  const nextPage = values => {\n    setStartDate(values.startDate);\n    setEndDate(values.endDate);\n    setName(values.name);\n    setPassport(values.passport);\n    setAddress(values.address);\n    setPhone(values.phone);\n\n    if (totalDays >= 3) {\n      setPage(page + 1);\n    } else {\n      alert('3 Days minimum');\n    }\n  };\n\n  const previousPage = () => {\n    setPage(page - 1);\n  };\n\n  const onChangeEndDate = e => {\n    setEndDate(e);\n  };\n\n  const onChangeStartDate = e => {\n    setStartDate(e);\n  };\n\n  const handleSubmit = values => {\n    const booking = {\n      name: values.name,\n      passport: values.passport,\n      address: values.address,\n      phone: values.phone,\n      bikeId: props.info.content._id,\n      brand: props.info.content.brand,\n      model: props.info.content.model,\n      plateNumber: props.info.content.plateNumber,\n      cost: props.info.content.model === 'Forza' || 'X-Max' ? \"140,000\" : \"75,000\",\n      //Дотелать проверку на стоимость байка\n      pricePerDay: pricePerDay,\n      alreadyPaid: '0',\n      payOnArrival: '0',\n      totalRate: totalAmount,\n      deposit: deposit,\n      startDate: values.startDate,\n      endDate: values.endDate,\n      totalDays: totalDays,\n      helmets: 'none',\n      gas: 'full',\n      confirmed: false,\n      description: values.description || 'none',\n      passportImg: 'none',\n      visaImg: 'none'\n    };\n    props.addNewBookinThunk(booking);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MDBContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(MDBRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MDBCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, \"Total days: \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 36\n    }\n  }, totalDays))), /*#__PURE__*/React.createElement(MDBCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }, \"Price per day \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 38\n    }\n  }, pricePerDay))), /*#__PURE__*/React.createElement(MDBCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }, \"Total amount: \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 38\n    }\n  }, totalAmount))), /*#__PURE__*/React.createElement(MDBCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  }, \"Deposit: \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 33\n    }\n  }, deposit)))), page > 1 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MDBRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MDBCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, \"Start Date : \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 33\n    }\n  }, format('dd.MM.yyyy', new Date(startDate))), \"\\xA0  -  \\xA0\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 18\n    }\n  }, format('hh:mm', new Date(startDate))))), /*#__PURE__*/React.createElement(MDBCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, \"End Date : \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 31\n    }\n  }, format('dd.MM.yyyy', new Date(endDate))), \"\\xA0  - \\xA0\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 18\n    }\n  }, format('hh:mm', new Date(endDate)))))), /*#__PURE__*/React.createElement(MDBRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MDBCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, \"Pick Up : \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 30\n    }\n  }, pickUp))), /*#__PURE__*/React.createElement(MDBCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 18\n    }\n  }, \"Drop Off : \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 32\n    }\n  }, dropOff))))) : '', page > 2 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MDBRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(MDBCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, \"Name : \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 23\n    }\n  }, name))), /*#__PURE__*/React.createElement(MDBCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, \"Passport N : \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 25\n    }\n  }, passport)))), /*#__PURE__*/React.createElement(MDBRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(MDBCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }, \"Phone : \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 28\n    }\n  }, phone))), /*#__PURE__*/React.createElement(MDBCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, \"Address : \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 30\n    }\n  }, address))))) : ''), page === 1 && /*#__PURE__*/React.createElement(WizardFormFirstPage, {\n    startDate: startDate,\n    endDate: endDate,\n    onSubmit: nextPage,\n    onChangeEndDate: onChangeEndDate,\n    onChangeStartDate: onChangeStartDate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 24\n    }\n  }), page === 2 && /*#__PURE__*/React.createElement(WizardFormSecondPage, {\n    previousPage: previousPage,\n    onSubmit: nextPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 11\n    }\n  }), page === 3 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(WizardFormThirdPage, {\n    previousPage: previousPage,\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 11\n    }\n  })));\n};\n\nexport default compose(connect(null, {\n  addNewBookinThunk\n}), reduxForm({\n  form: 'bookinModal'\n}))(ModalForm);\nreduxForm({\n  form: 'bookinModal'\n})(ModalForm);","map":{"version":3,"sources":["/Users/macbookair/Documents/Webapps/react-crm/client/src/components/HomeComponents/BikesList/BookingModal/BookingModalForm.jsx"],"names":["React","useState","useEffect","reduxForm","WizardFormFirstPage","WizardFormSecondPage","WizardFormThirdPage","format","MDBContainer","MDBRow","MDBCol","addNewBookinThunk","compose","connect","style","ModalForm","props","helmets","value","startDate","setStartDate","info","dateInfo","Date","endDate","setEndDate","setDate","getDate","pickUp","setPickUp","dropOff","setDropOff","name","setName","passport","setPassport","address","setAddress","phone","setPhone","totalDays","setTotalDays","pricePerDay","setPricePerDay","content","totalAmount","setTotalAmount","deposit","setDeposit","Math","floor","sum","pricePerMonth","alert","page","setPage","nextPage","values","previousPage","onChangeEndDate","e","onChangeStartDate","handleSubmit","booking","bikeId","_id","brand","model","plateNumber","cost","alreadyPaid","payOnArrival","totalRate","gas","confirmed","description","passportImg","visaImg","form"],"mappings":"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","sourcesContent":["import React , { useState, useEffect }from 'react'\nimport { reduxForm } from 'redux-form'\nimport WizardFormFirstPage from './WizardFormFirstPage'\nimport WizardFormSecondPage from './WizardFormSecondPage'\nimport WizardFormThirdPage from './WizardFormThirdPage'\nimport format from 'date-format'\nimport { MDBContainer, MDBRow, MDBCol } from \"mdbreact\";\nimport {addNewBookinThunk} from '../../../../redux/bookingReducer'\nimport { compose } from 'redux'\nimport {connect} from 'react-redux'\nimport style from './style.module.css'\n\nconst ModalForm = (props) => {\n    let helmets = [{value:'none'},{value:'1'},{value:'2'},{value:'3'}]\n    const [startDate, setStartDate] = useState(props.info.dateInfo.startDate || new Date())\n    const [endDate, setEndDate] = useState(props.info.dateInfo.endDate || new Date().setDate(startDate.getDate() + 3))\n    const [pickUp, setPickUp] = useState(props.info.dateInfo.pickUp || 'Office')\n    const [dropOff, setDropOff] = useState(props.info.dateInfo.dropOff || 'Office')\n    const [name, setName] = useState('')\n    const [passport, setPassport] = useState('')\n    const [address, setAddress] = useState('')\n    const [phone, setPhone] = useState('')\n    const [totalDays, setTotalDays] = useState('')\n    const [pricePerDay, setPricePerDay] = useState(props.info.content.pricePerDay)\n    const [totalAmount, setTotalAmount] = useState('')\n    const [deposit, setDeposit] = useState(props.info.content.deposit)\n\n    useEffect(() => {\n        setTotalDays(Math.floor((endDate - startDate) / 1000 / 60 / 60 / 24))\n    }, [endDate, startDate]);\n    useEffect(() => {\n        const sum =totalDays * pricePerDay  \n        setTotalAmount( (sum < props.info.content.pricePerMonth) ? sum  : props.info.content.pricePerMonth)\n    }, [totalDays, pricePerDay]);\n    useEffect(() => {\n        if(totalDays >= 15){\n            setPricePerDay(props.info.content.pricePerDay - 50)\n        } \n        if (totalDays > 31 ){\n            alert(\" If you want rent more then 1 mmonth pls contact us and we give you special price\")\n        } \n    }, [totalDays]);\n\n    const [page , setPage] = useState(1)\n    const nextPage = (values) => {\n        setStartDate(values.startDate)\n        setEndDate(values.endDate)\n        setName(values.name)\n        setPassport(values.passport)\n        setAddress(values.address)\n        setPhone(values.phone)\n        if(totalDays >= 3)\n        {\n          setPage(page + 1)  \n        }else{\n            alert('3 Days minimum')\n        }\n        }\n    const previousPage = () => {setPage(page - 1)}\n    const onChangeEndDate = (e) => {\n        setEndDate(e)\n    }\n    const onChangeStartDate = (e) => {\n        setStartDate(e)\n    }\n    const handleSubmit= (values) => {\n        const booking = {\n            name: values.name,\n            passport : values.passport,\n            address :values.address,\n            phone: values.phone,\n            bikeId: props.info.content._id,\n            brand  :props.info.content.brand,\n            model : props.info.content.model,\n            plateNumber : props.info.content.plateNumber,\n            cost : (props.info.content.model === 'Forza' || 'X-Max') ? \"140,000\" : \"75,000\",  //Дотелать проверку на стоимость байка\n            pricePerDay :pricePerDay,\n            alreadyPaid : '0',\n            payOnArrival : '0',\n            totalRate: totalAmount,\n            deposit : deposit,\n            startDate:values.startDate,\n            endDate: values.endDate,\n            totalDays : totalDays,\n            helmets :'none',\n            gas : 'full',\n            confirmed:false,\n            description:values.description || 'none',\n            passportImg:'none',\n            visaImg:'none'\n            }\n            props.addNewBookinThunk(booking)\n    }\n\n    return (\n    <> \n    <MDBContainer>\n        <MDBRow>\n            <MDBCol><p>Total days: <span>{totalDays}</span></p></MDBCol>\n            <MDBCol><p>Price per day <span>{pricePerDay}</span></p></MDBCol>\n            <MDBCol><p>Total amount: <span>{totalAmount}</span></p></MDBCol>\n            <MDBCol><p>Deposit: <span>{deposit}</span></p></MDBCol> \n        </MDBRow>\n   {(page > 1) ? \n   <>\n        <MDBRow>\n           <MDBCol>\n                <p>Start Date : <span>{format('dd.MM.yyyy',new Date(startDate))}</span>\n                &nbsp;  -  &nbsp;\n                 <span>{format('hh:mm',new Date(startDate))}</span></p>\n           </MDBCol> \n           <MDBCol>\n                <p>End Date : <span>{format('dd.MM.yyyy',new Date(endDate))}</span>\n                &nbsp;  - &nbsp;\n                 <span>{format('hh:mm',new Date(endDate))}</span></p>\n           </MDBCol> \n        </MDBRow>\n        <MDBRow>\n            <MDBCol>\n                <p>Pick Up : <span>{pickUp}</span></p>\n            </MDBCol>\n            <MDBCol>\n                 <p>Drop Off : <span>{dropOff}</span></p>\n            </MDBCol>\n        </MDBRow>\n    </>\n    : ''}\n    {(page > 2) \n    ? \n    <>\n    <MDBRow>\n        <MDBCol>\n            <p>Name : <span>{name}</span></p>\n        </MDBCol>\n        <MDBCol> \n        <p>Passport N : <span>{passport}</span></p>\n        </MDBCol>\n    </MDBRow>\n    <MDBRow>\n        <MDBCol><p>Phone : <span>{phone}</span></p></MDBCol>\n        <MDBCol><p>Address : <span>{address}</span></p></MDBCol>\n    </MDBRow>\n    </>\n    :''\n    }\n</MDBContainer>\n        {page === 1 && <WizardFormFirstPage \n        startDate={startDate}\n        endDate={endDate}\n        onSubmit={nextPage} \n        onChangeEndDate={onChangeEndDate}\n        onChangeStartDate={onChangeStartDate}\n        />}\n        {page === 2 && (\n          <WizardFormSecondPage\n            previousPage={previousPage}\n            onSubmit={nextPage}\n           \n          />\n        )}\n        {page === 3 && (\n            <>\n          <WizardFormThirdPage\n            previousPage={previousPage}\n            onSubmit={handleSubmit}\n          />\n          </>\n        )}\n      </>\n    )\n}\n\nexport default compose(\n    connect(null, {addNewBookinThunk}),\n    reduxForm({ form: 'bookinModal' }))(ModalForm)\n\n\nreduxForm({ form: 'bookinModal' })(ModalForm)\n"]},"metadata":{},"sourceType":"module"}