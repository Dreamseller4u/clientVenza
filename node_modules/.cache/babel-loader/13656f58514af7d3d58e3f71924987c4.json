{"ast":null,"code":"import { getBikes, addNewBike, deleteBike, getBikeById, updateBike, setPrimaryImg } from \"../api/vehicleApi\";\nimport { getVehiclesInfo } from \"../api/bookingAPI\";\nimport { setPrice } from \"../api/settingsAPI\";\nconst ADDBIKE = 'ADD-BIKE';\nconst SET_BIKES = 'SET_BIKES';\nconst DEL_BIKE = 'DEL_BIKE';\nconst SET_VEHICLES_INFO = 'SET_VEHICLES_INFO';\nconst SET_BIKE_BY_ID = 'SET_BIKE_BY_ID';\nlet initsialState = {\n  bikes: null,\n  bikeAdded: false,\n  bikeById: null,\n  vehiclesInfo: null\n};\n\nconst bikeReducer = (state = initsialState, action) => {\n  switch (action.type) {\n    case ADDBIKE:\n      let bike = action.bikes;\n      return { ...state,\n        bikes: [...state.bikes, bike],\n        bikeAdded: true\n      };\n\n    case SET_BIKES:\n      return { ...state,\n        bikes: [...action.bikes]\n      };\n\n    case SET_BIKE_BY_ID:\n      return { ...state,\n        bikeById: action.bikeById\n      };\n\n    case DEL_BIKE:\n      let bikesArr = [...state.bikes];\n\n      for (let i = 0; i <= bikesArr.length; i++) {\n        if (bikesArr[i]) {\n          bikesArr[i]._id === action.id ? bikesArr.splice(i, 1) : console.log(bikesArr);\n        }\n      }\n\n      return { ...state,\n        bikes: bikesArr\n      };\n\n    case SET_VEHICLES_INFO:\n      return { ...state,\n        vehiclesInfo: action.info\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst addBikeAC = bikes => {\n  return {\n    type: ADDBIKE,\n    bikes\n  };\n};\n\nconst deleteBikeAC = id => {\n  return {\n    type: DEL_BIKE,\n    id\n  };\n};\n\nconst setBikesList = bikes => {\n  return {\n    type: SET_BIKES,\n    bikes\n  };\n};\n\nconst setBikeById = bikeById => {\n  return {\n    type: SET_BIKE_BY_ID,\n    bikeById\n  };\n};\n\nconst setVehiclesInfo = info => {\n  return {\n    type: SET_VEHICLES_INFO,\n    info\n  };\n};\n\nexport const setBikeByIdThunk = bikeId => {\n  return dispatch => {\n    getBikeById(bikeId).then(data => dispatch(setBikeById(data)));\n  };\n};\nexport const setBikesListThunk = () => {\n  return dispatch => {\n    getBikes().then(data => dispatch(setBikesList(data)));\n  };\n};\nexport const addBikeThunk = bike => {\n  return dispatch => {\n    addNewBike(bike).then(res => (res.data.code = 1) ? dispatch(addBikeAC(bike), alert(res.data.message)) : null);\n  };\n};\nexport const deleteBikeThunk = bikeId => {\n  return dispatch => {\n    deleteBike(bikeId).then(data => data.code === 1 ? dispatch(deleteBikeAC(bikeId)) : null);\n  };\n};\nexport const setBikeBookThunk = () => {\n  return dispatch => {\n    getVehiclesInfo().then(data => dispatch(setVehiclesInfo(data)));\n  };\n};\nexport const updateBikeThunk = bikeData => {\n  return dispatch => {\n    updateBike(bikeData).then(res => alert(res.data.message));\n  };\n};\nexport const setPrimaryThunk = (_id, img) => {\n  return dispatch => {\n    setPrimaryImg(_id, img).then(res => alert(res.data.message));\n  };\n};\nexport const setPriceThunk = prices => {\n  return dispatch => {\n    setPrice(prices).then(res => alert(res.data.message));\n  };\n};\nexport default bikeReducer;","map":{"version":3,"sources":["/Users/macbookair/Documents/Webapps/react-crm/client/src/redux/bikesReducer.js"],"names":["getBikes","addNewBike","deleteBike","getBikeById","updateBike","setPrimaryImg","getVehiclesInfo","setPrice","ADDBIKE","SET_BIKES","DEL_BIKE","SET_VEHICLES_INFO","SET_BIKE_BY_ID","initsialState","bikes","bikeAdded","bikeById","vehiclesInfo","bikeReducer","state","action","type","bike","bikesArr","i","length","_id","id","splice","console","log","info","addBikeAC","deleteBikeAC","setBikesList","setBikeById","setVehiclesInfo","setBikeByIdThunk","bikeId","dispatch","then","data","setBikesListThunk","addBikeThunk","res","code","alert","message","deleteBikeThunk","setBikeBookThunk","updateBikeThunk","bikeData","setPrimaryThunk","img","setPriceThunk","prices"],"mappings":"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","sourcesContent":["import { getBikes, addNewBike, deleteBike, getBikeById, updateBike, setPrimaryImg } from \"../api/vehicleApi\";\nimport { getVehiclesInfo } from \"../api/bookingAPI\";\nimport { setPrice } from \"../api/settingsAPI\";\n\nconst ADDBIKE = 'ADD-BIKE';\nconst SET_BIKES = 'SET_BIKES'\nconst DEL_BIKE = 'DEL_BIKE'\nconst SET_VEHICLES_INFO ='SET_VEHICLES_INFO'\nconst SET_BIKE_BY_ID ='SET_BIKE_BY_ID'\n\nlet initsialState = {\n    bikes: null,\n    bikeAdded: false,\n    bikeById:null,\n    vehiclesInfo: null\n};\n\nconst bikeReducer = (state = initsialState, action) => {\n\n    switch (action.type) {\n        case ADDBIKE:\n            let bike = action.bikes\n            return {\n                ...state,\n                bikes: [...state.bikes, bike],\n                bikeAdded: true\n            }\n        case SET_BIKES:\n            return {\n                ...state,\n                bikes: [...action.bikes]\n            }\n            case SET_BIKE_BY_ID:\n                return {\n                    ...state,\n                    bikeById: action.bikeById\n                }\n        case DEL_BIKE:\n            let bikesArr = [...state.bikes]\n            for (let i = 0; i <= bikesArr.length; i++) {\n                if (bikesArr[i]) {\n                    (bikesArr[i]._id === action.id) ? bikesArr.splice(i, 1) : console.log(bikesArr)\n                }\n            }    \n            return {\n                ...state,\n                bikes: bikesArr\n            }\n        case SET_VEHICLES_INFO:\n            return {\n                ...state,\n                vehiclesInfo: action.info\n            }         \n        default: return state;\n    }\n}\n const addBikeAC = (bikes) => { return { type: ADDBIKE, bikes } }\n const deleteBikeAC = (id) => { return { type: DEL_BIKE, id } }\n const setBikesList = (bikes) => { return { type: SET_BIKES, bikes } }\n const setBikeById = (bikeById) => {return {type:SET_BIKE_BY_ID, bikeById}}\n const setVehiclesInfo = (info) => {return {type: SET_VEHICLES_INFO, info}}\n\nexport const setBikeByIdThunk = (bikeId) => {\n    return (dispatch)=>{\n        getBikeById(bikeId).then(data => \n            dispatch(setBikeById(data)))\n    }\n }\n\nexport const setBikesListThunk = () => {\n    return (dispatch) => {\n        getBikes().then(data =>\n            dispatch(setBikesList(data))\n        )\n    \n    }\n}\nexport const addBikeThunk = (bike) => {\n    return (dispatch) => {\n        addNewBike(bike).then(res =>\n            (res.data.code = 1) ? dispatch(addBikeAC(bike),\n                alert(res.data.message))\n                : null)\n    }\n}\nexport const deleteBikeThunk = (bikeId) => {\n    return (dispatch) => {\n        deleteBike(bikeId).then(data =>\n            (data.code === 1) \n            ? dispatch(deleteBikeAC(bikeId))\n             : null)\n    }\n}\n\nexport const setBikeBookThunk = () => {\n    return (dispatch) =>  {\n        getVehiclesInfo().then(data => \n            dispatch(setVehiclesInfo(data)))\n    }\n}\nexport const updateBikeThunk = (bikeData) => {\n    return (dispatch) => {\n        updateBike(bikeData).then(res => alert(res.data.message))\n        \n    }\n}\nexport const setPrimaryThunk = (_id, img) => {\n    return (dispatch) => {\n        setPrimaryImg(_id, img).then(res => alert(res.data.message))\n    }\n}\nexport const setPriceThunk = (prices) => {\n    return (dispatch)=>{\n        setPrice(prices).then(res => alert(res.data.message))\n    }\n}\n\nexport default bikeReducer;\n"]},"metadata":{},"sourceType":"module"}